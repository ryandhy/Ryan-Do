<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Converse购物车</title>
		<link rel="shortcut icon" href="img/index/logo-icon.png"/>
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/goods.css" />
		<link rel="stylesheet" type="text/css" href="css/banner.css" />
		<link rel="stylesheet" type="text/css" href="css/cart.css"/>
	</head>
	<body>
		<!-- 聊聊吧 -->
		<div id="chatImg">
			<a href="brain.html"><img src="img/index/livechat.png"></a>
		</div>
		<!-- 粘性定位头部 -->
		<div class="HEADER">
			<!-- header logo 注册 登录 等等-->
			<header>
				<a href="index.html"><img src="img/index/logo.png"></a>
				<div class="header_right">
					<!-- <span class="login">登录</span>
					<span>&nbsp;/&nbsp;</span>
					<span class="reg">注册</span>
					<div class="reg-icon"></div> -->
					<span id="tel-name" style="color: #fff;font-size: 12px;margin-right: 10px;"></span>
					<span id="logout" style="color: #fff;font-size: 12px;cursor: pointer;">退出</span>
					<div class="reg-icon" style="background: url(img/index/sprites_header_footer.png) no-repeat -137px -98px;"></div>
					<a href="cart.html"><span class="cart">购物车</span></a>
					<div class="cart-icon">0</div>
					<div class="chat-icon"></div>
					<div class="search-icon"></div>
					<div class="help-icon"></div>
					<span class="point point1"></span><!-- 登录三角箭头 -->
					<span class="point point2"></span><!-- 注册 注册图标三角箭头 -->
					<span class="point point3"></span><!-- 搜索三角箭头 -->
				</div>
			</header>
			<!-- header_search 搜索下拉框-->
			<div class="header_search">
				<div class="search-main">
					<input type="text" placeholder="想找什么随便搜">
					<div class="search-main-btn">
						<span class="s1"></span>
						<span class="s2"></span>
					</div>
				</div>
			</div>
			<!-- header_slide 登录下拉框-->
			<div class="header_slide header_slide_login">
				<div class="header_slide_top">
					<!-- 这是登录 -->
					<div class="login-slide">
						<div class="login-slide-left">
							<p>还未注册？</p>
							<a href="#">
								<span>注册账户</span>
								<span class="s-login"></span>
							</a>
						</div>
						<div class="login-slide-middle"></div>
						<div class="login-slide-right">
							<p>已经成为会员？</p>
							<input type="text" class="cell" placeholder="邮箱/手机">
							<span class="error cell-error">&nbsp;</span><!-- 请输入有效的电子邮箱/手机号码! -->
							<input type="text" class="pwd" placeholder="账户密码">
							<span class="error pwd-error">&nbsp;</span><!-- 密码必须在6-12个字符之间! -->
							<!-- <input type="checkbox" class="check"> -->
							<div class="check">
								<span class="text">一旦登录，即表明您同意匡威更新的</span>
								<a href="#" class="text">隐私政策</a>
								<span class="text">和</span>
								<a href="#" class="text">使用规则</a>
							</div>
							<a href="#" class="click-login">
								<span>登录</span>
								<span class="s-c-login"></span>
							</a>
							<div class="check _check">
								<span class="text">记住登录名</span>
								<a href="#" class="text">忘记密码?</a>
							</div>
						</div>
					</div>
				</div>
				<div class="header_slide_bottom"></div><!-- 尾部 -->
			</div>
			<!-- header_slide 注册下拉框-->
			<div class="header_slide header_slide_reg">
				<div class="header_slide_top">
					<!-- 这是注册 -->
					<div class="reg-slide">
						<div class="reg-slide-left">
							<div class="reg-slide-left-first">
								<span>手机号码</span>
								<span class="star"> *</span>
								<div class="cell">
									<input type="text" class="cell-phone" placeholder="135xxxx3333">
									<span class="error cell-error">请输入手机号码!</span>
								</div>
							</div>
							<div class="reg-slide-left-first">
								<span>输入密码</span>
								<span class="star"> *</span>
								<div class="cell">
									<input type="text" class="cell-pwd" placeholder="密码至少为6位字符">
									<span class="error pwd-error">请输入密码!</span>
								</div>
							</div>
						</div>
						<div class="reg-slide-middle">
							<div class="reg-slide-left-first">
								<span>邮箱</span>
								<span class="star"> *</span>
								<div class="cell">
									<input type="text" class="cell-email" placeholder="example@converse.com">
									<span class="error email-error">请输入电子邮箱地址!</span>
								</div>
							</div>
							<div class="reg-slide-left-first">
								<span>确认密码</span>
								<span class="star"> *</span>
								<div class="cell">
									<input type="text" class="cell-repwd" placeholder="请再次输入密码">
									<span class="error repwd-error">请再次输入密码!</span>
								</div>
							</div>
							<div class="reg-slide-left-first">
								<span>短信验证码</span>
								<span class="star"> *</span>
								<div class="cell">
									<input type="text" class="cell-code" class="repwd">
									<a href="#">发送短信验证码</a>
									<span class="error code-error">您填写的短信验证码有误,请重新输入!</span>
								</div>
							</div>
						</div>
						<div class="reg-slide-right">
							<div class="reg-slide-left-first">
								<span>性别</span>
								<span class="star"> *</span>
								<div class="gender">
									<div class="sex">
										<span>男的</span>
									</div>
									<div class="sex">
										<span>女的</span>
									</div>
								</div>
							</div>
							<div class="reg-slide-left-first">
								<span>生日（年-月-日）</span>
								<span class="star"> *</span>
								<div class="bir-box">
									<div class="select-box select-box1">
										<span>2019</span>
										<ul class="bir-day ul1">
											<li>2019</li>
											<li>2018</li>
											<li>2017</li>
											<li>2016</li>
											<li>2015</li>
											<li>2014</li>
											<li>2013</li>
											<li>2012</li>
											<li>2011</li>
											<li>2010</li>
											<li>2009</li>
											<li>2008</li>
											<li>2007</li>
											<li>2006</li>
											<li>2005</li>
											<li>2004</li>
											<li>2003</li>
											<li>2002</li>
											<li>2001</li>
											<li>2000</li>
											<li>1999</li>
											<li>1998</li>
											<li>1997</li>
											<li>1996</li>
											<li>1995</li>
											<li>1994</li>
											<li>1993</li>
											<li>1992</li>
											<li>1991</li>
											<li>1990</li>
										</ul>
									</div>
									<div class="select-box select-box2">
										<span>1</span>
										<!-- <div class="bir-day"> -->
										<ul class="bir-day ul2">
											<li>1</li>
											<li>2</li>
											<li>3</li>
											<li>4</li>
											<li>5</li>
											<li>6</li>
											<li>7</li>
											<li>8</li>
											<li>9</li>
											<li>10</li>
											<li>11</li>
											<li>12</li>
										</ul>
		
										<!-- </div> -->
									</div>
									<div class="select-box select-box3">
										<span>1</span>
										<ul class="bir-day ul3">
											<li>1</li>
											<li>2</li>
											<li>3</li>
											<li>4</li>
											<li>5</li>
											<li>6</li>
											<li>7</li>
											<li>8</li>
											<li>9</li>
											<li>10</li>
											<li>11</li>
											<li>12</li>
											<li>13</li>
											<li>14</li>
											<li>15</li>
											<li>16</li>
											<li>17</li>
											<li>18</li>
											<li>19</li>
											<li>20</li>
											<li>21</li>
											<li>22</li>
											<li>23</li>
											<li>24</li>
											<li>25</li>
											<li>26</li>
											<li>27</li>
											<li>28</li>
											<li>29</li>
											<li>30</li>
											<li>31</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="check">
								<span class="text">一旦创建账户，即表明您同意匡威更新的</span>
								<a href="#" class="text">隐私政策</a>
								<span class="text">和</span>
								<a href="#" class="text">使用规则</a>
							</div>
							<a href="#" class="click-reg">
								<span>注册账户</span>
								<span class="s-c-reg"></span>
							</a>
						</div>
					</div>
				</div>
				<div class="header_slide_bottom"></div><!-- 尾部 -->
			</div>
		</div>
		<!-- header_nav 男的 女的 儿童 栏-->
		<div class="header_nav"></div>
		<!-- header_nav_slide 男的 女的 儿童 下拉框-->
		<div class="header_nav_slide man">
			<div class="man_top">
				<div class="manNav">
					<img src="img/index/M_B_FTW_190416.jpg">
					<p>踩的</p>
				</div>
				<div class="manNav">
					<img src="img/index/M_B_APP_190416.jpg">
					<p>穿的</p>
				</div>
				<div class="manNav">
					<img src="img/index/M_B_TEE_190416.jpg">
					<p>T恤</p>
				</div>
				<div class="manNav">
					<img src="img/index/M_B_ACC_190416.jpg">
					<p>戴的</p>
				</div>
				<div class="manNav">
					<img src="img/index/new_icon.jpg">
					<p>新产品</p>
				</div>
				<div class="manNav">
					<img src="img/index/discount_icon.jpg">
					<p>优惠</p>
				</div>
			</div>
			<div class="man_bottom">
				<div class="manNav">
					<img src="img/index/_drop_down_men_06_30.jpg">
					<p>经典款</p>
				</div>
				<div class="manNav">
					<img src="img/index/chuck_70_190416.jpg">
					<p>CHUCK 70</p>
				</div>
				<div class="manNav">
					<img src="img/index/onestar_190416.jpg">
					<p>ONE STAR</p>
				</div>
				<div class="manNav">
					<img src="img/index/allstar_190416.jpg">
					<p>ALL STAR</p>
				</div>
				<div class="manNav">
					<img src="img/index/cons_190530.jpg">
					<p>CONS</p>
				</div>
				<div class="manNav">
					<img src="img/index/jp_190416.jpg">
					<p>JACK PURCELL</p>
				</div>
			</div>
		</div>
		<div class="header_nav_slide woman">
			<div class="man_top">
				<div class="manNav">
					<img src="img/index/W_B_FTW_190416.jpg">
					<p>踩的</p>
				</div>
				<div class="manNav">
					<img src="img/index/W_B_APP_190416.jpg">
					<p>穿的</p>
				</div>
				<div class="manNav">
					<img src="img/index/W_B_TEE_190416.jpg">
					<p>T恤</p>
				</div>
				<div class="manNav">
					<img src="img/index/W_B_ACC_190416.jpg">
					<p>戴的</p>
				</div>
				<div class="manNav">
					<img src="img/index/new_icon.jpg">
					<p>新产品</p>
				</div>
				<div class="manNav">
					<img src="img/index/discount_icon.jpg">
					<p>优惠</p>
				</div>
			</div>
			<div class="man_bottom">
				<div class="manNav">
					<img src="img/index/_drop_down_men_06_30.jpg">
					<p>经典款</p>
				</div>
				<div class="manNav">
					<img src="img/index/f_chuck_70_190416.jpg">
					<p>CHUCK 70</p>
				</div>
				<div class="manNav">
					<img src="img/index/f_onestar_190416.jpg">
					<p>ONE STAR</p>
				</div>
				<div class="manNav">
					<img src="img/index/f_allstar_190416.jpg">
					<p>ALL STAR</p>
				</div>
				<div class="manNav">
					<img src="img/index/f_cons_190416.jpg">
					<p>CONS</p>
				</div>
				<div class="manNav">
					<img src="img/index/f_jp_190416.jpg">
					<p>JACK PURCELL</p>
				</div>
			</div>
		</div>
		<div class="child">
			<div class="man_top">
				<div class="manNav">
					<img src="img/index/1-4-v1.jpg">
					<p>(1-4岁)</p>
				</div>
				<div class="manNav">
					<img src="img/index/4-8-v1.jpg">
					<p>(4-8岁)</p>
				</div>
				<div class="manNav">
					<img src="img/index/4-12-v1.jpg">
					<p>(4-12岁)</p>
				</div>
				<div class="manNav">
					<img src="img/index/8-12.jpg">
					<p>(8-12岁)</p>
				</div>
			</div>
		</div>
		
		<!-- 提示语 进度条-->
		<div id="pub-top" style="width:100%;">
			<!-- 提示语 -->
			<div class="tip-text">
				<a href="#">
					<p>尊敬的顾客您好，我们店铺是不会泄露您的消费信息的，请放心。另外我们也不会要求获取、收集、使用任何与消费者金融消费类（如：信用卡）信息，
					如果接到以上信息电话，是属于诈骗电话，请勿相信，以防钱财损失。如您对订单有疑问，请联系在线客服。</p>
				</a>
				<i class="close"></i>
			</div>
			<!-- 进度条 -->
			<div class="progress">
				<p>
					<span>我的购物车</span>
					<i class="black"></i>
				</p>
				<p class="order-line1">
					<span>填写订单信息</span>
					<i class="white"></i>
				</p>
				<p class="order-line2">
					<span>成功提交订单</span>
					<i class="white"></i>
				</p>
			</div>
		</div>
		
		<!-- 购物车为空 -->
		<div class="cart-empty">
			<h3>您的购物车还是空的</h3>
			<div class="cart-empty-btn">
				<a href="index.html">马上去购物</a>
			</div>
		</div>
		<!-- 购物车不为空 -->
		<div class="cart CART">
			
		</div>
	
		<!-- footer -->
		<div class="footer"></div>
	</body>
</html>
<script src="js/jQuery.js"></script>
<script src="js/banner.js"></script>
<script src="js/index.js"></script>
<script src="js/Magn.js"></script>
<script src="js/chatBa.js"></script>
<script type="text/javascript">
	$(function(){
		$(".footer").load("footer.html .footer"); // 加载尾部
		$("#pub-top .tip-text .close").click(function(){ // 点击关闭提示条
			$(".tip-text").slideUp();
		});
	});
	
	if(localStorage.getItem("user") != null){
		$("header #tel-name").html("欢迎您,"+localStorage.getItem("user"));
		//退出账户
		$("header #logout").click(function(){
			$(location).attr("href", "index.html");
			localStorage.clear();
		});
	}
	if(localStorage.getItem("user") == null){
		$("header #tel-name").html("请先登录");
		$("header #logout").html("&nbsp");
		$("header #tel-name").click(function(){
			$(location).attr("href", "index.html");
		});
	}
	
	
	let obj = JSON.parse(localStorage.getItem("data"));
	let oCartEmpty = document.getElementsByClassName("cart-empty")[0];
	let oCart = document.getElementsByClassName("CART")[0];
	
	if(obj == null){
		oCartEmpty.style.display = "block";
		oCart.style.display = "none";
	}else{
		oCartEmpty.style.display = "none";
		oCart.style.display = "block";
		// $(".cart-icon").html(obj.length);
		$(".cart-icon").html(obj.num);
		
		oCart.innerHTML = `
			<p>您的购物车：<span>1</span>件商品</p>
			<div class="checked-box">
				<span class="checked-all">全选</span>
				<span class="_checked">您已选中<b>1</b>件商品</span>
			</div>
			<div class="cart-main">
				<div class="cart-main-content">
					<div class="cart-main-content-top">
						<span class="checked-top"></span>
						<div class="cart-main-top-right">
							<div class="edit">编辑</div>
							<div class="del">删除</div>
						</div>
					</div>
					<div class="cart-main-content-bottom">
						<div class="cart-main-bottom-left">
							<a href="#" class="img">
								<img src="${obj.img}" width="160" height="160">
							</a>
							<div class="p">
								<h4><a href="#">${obj.title}</a></h4>
								<p>型号：165751C001</p>
								<p>颜色：黑色</p>
								<p>尺码：${obj.size}</p>
							</div>
						</div>
						<div class="cart-main-bottom-right">
							<p class="total-price">￥<span class="Total-Price">${obj.total}</span>.00</p>
							<div class="cart-main-bottom-right-num">
								<span>数量</span>
								<p class="single-price" style="display:none;">${obj.price}</p>
								<div class="totle-num">
									<span class="prev">-</span>
									<input type="text" value="${obj.num}" disabled>
									<span class="next">+</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="checked-box">
				<span class="checked-all">全选</span>
				<span class="_checked">您已选中<b>1</b>件商品</span>
			</div>
			<div class="shop-cart">
				<div class="shop-cart-left">
					<div class="help-box">
						<h4>需要帮助吗？</h4>
						<a href="#"><li>如何确保订单安全？</li></a>
						<a href="#"><li>我可以使用什么付款方式？</li></a>
						<a href="#"><li>如何进行退换货？</li></a>
						<a href="#"><li>更多帮助</li></a>
					</div>
					<div class="shopping-box">
						<a href="index.html">继续购物</a>
					</div>
				</div>
				<div class="shop-cart-right">
					<p class="p1">
						<span>商品原价:</span>
						<span class="yuan-price">￥0.00</span>
					</p>
					<p class="p2">
						<span>店铺活动:</span>
						<span>￥0.00</span>
					</p>
					<p class="p3">
						<span>商品金额:</span>
						<span class="money-price">￥0.00</span>
					</p>
					<p class="p4">
						<span>*</span>
						<span>不含运费及优惠券活动</span>
					</p>
					<span class="order">结算</span>
				</div>
			</div>
		`;
			
		$(".yuan-price").html("￥"+obj.total+".00");
		$(".money-price").html("￥"+obj.total+".00");
		
		$(".totle-num .prev").click(function(){ // 点击数量减少
			if($(this).next().val() > 1){
				$(this).next().val(Number($(this).next().val()) - 1); // 数量减1
				$(this).parent().prev().prev().parent().prev().html('￥'+Number($(this).next().val())*Number($(this).parent().prev().html())+'.00');
				$(".yuan-price").html('￥'+Number($(this).next().val())*Number($(this).parent().prev().html())+'.00');
				$(".money-price").html('￥'+Number($(this).next().val())*Number($(this).parent().prev().html())+'.00');
				obj.num = $(this).next().val(); // 当前数量
				obj.total = Number($(this).next().val())*Number($(this).parent().prev().html()); // 当前总价
				localStorage.setItem('data', JSON.stringify(obj)); //重新存储
				
				let obj1 = JSON.parse(localStorage.getItem("data"));
				$(".cart-icon").html(obj1.num);
			}
		});
		
		$(".totle-num .next").click(function(){ // 点击数量增加
			$(this).prev().val(Number($(this).prev().val()) + 1); // 数量加1
			$(this).parent().prev().prev().parent().prev().html('￥'+Number($(this).prev().val())*Number($(this).parent().prev().html())+'.00');
			$(".yuan-price").html('￥'+Number($(this).prev().val())*Number($(this).parent().prev().html())+'.00');
			$(".money-price").html('￥'+Number($(this).prev().val())*Number($(this).parent().prev().html())+'.00');
			obj.num = $(this).prev().val(); // 当前数量
			obj.total = Number($(this).prev().val())*Number($(this).parent().prev().html()); // 当前总价
			localStorage.setItem('data', JSON.stringify(obj)); // 重新存储
			
			let obj1 = JSON.parse(localStorage.getItem("data"));
			$(".cart-icon").html(obj1.num);
		});
		//点击删除购物车 清空本地缓存
		$(".del").click(function(){
			oCartEmpty.style.display = "block";
			oCart.style.display = "none";
			localStorage.removeItem("data");
		});
		//页面跳转
		$(".shop-cart-right .order").click(function(){
			$(location).attr("href", "order.html");
		});
		
		//伪元素复选框
		$(".checked-all").click(function(){
			// console.log($(this).css("backgroundImage"));
			if($(this).css("backgroundImage") == 'url("http://localhost/Converse/img/cart/checked.png")'){
				$(".checked-all").css("backgroundImage",'url("http://localhost/Converse/img/cart/check.png")');
				$(".checked-top").css("backgroundImage",'url("http://localhost/Converse/img/cart/check.png")');
				$(".Total-Price").html(0);
				$(".yuan-price").html("￥"+0+".00");
				$(".money-price").html("￥"+0+".00");
			}else{
				$(".checked-all").css("backgroundImage",'url("http://localhost/Converse/img/cart/checked.png")');
				$(".checked-top").css("backgroundImage",'url("http://localhost/Converse/img/cart/checked.png")');
				$(".Total-Price").html(obj.total);
				$(".yuan-price").html("￥"+obj.total+".00");
				$(".money-price").html("￥"+obj.total+".00");
			}
		});
		$(".checked-top").click(function(){
			if($(this).css("backgroundImage") == 'url("http://localhost/Converse/img/cart/checked.png")'){
				$(this).css("backgroundImage",'url("http://localhost/Converse/img/cart/check.png")');
				$(".checked-all").css("backgroundImage",'url("http://localhost/Converse/img/cart/check.png")');
				$(".Total-Price").html(0);
				$(".yuan-price").html("￥"+0+".00");
				$(".money-price").html("￥"+0+".00");
			}else{
				$(this).css("backgroundImage",'url("http://localhost/Converse/img/cart/checked.png")');
				$(".checked-all").css("backgroundImage",'url("http://localhost/Converse/img/cart/checked.png")');
				$(".Total-Price").html(obj.total);
				$(".yuan-price").html("￥"+obj.total+".00");
				$(".money-price").html("￥"+obj.total+".00");
			}
		});
	}
</script>